#  运输层协议概述

![image-20210620093811041](https://note-java.oss-cn-beijing.aliyuncs.com/img/image-20210620093811041.png)

##  进程之间的通信

从通信和信息处理的角度看，运输层向它上面的应用层提供通信服务，<font color='red'>它属于面向通信部分的最高层，同时也是用户功能中的最低层</font>>。

当网络的边缘部分中的两个主机使用网络的核心部分的功能进行端到端的通信时，==只有位于网络边缘部分的主机的协议栈才有运输层==，而网络核心部分中的路由器在转发分组时都只用到下三层的功能。

![image-20210620094651786](https://note-java.oss-cn-beijing.aliyuncs.com/img/image-20210620094651786.png)

![image-20210620094802213](https://note-java.oss-cn-beijing.aliyuncs.com/img/image-20210620094802213.png)

**运输层的作用**：==从IP层来说，通信的两端是两台主机==。但“两台主机之间的通信”这种说法还不够清楚。严格地讲，两台主机进行通信就是两台主机中的应用进程互相通信。==从运输层的角度看，通信的真正端点并不是主机而是主机中的进程==。也就是说，端到端的通信是应用进程之间的通信。

**端系统之间通信的含义**：“主机A和主机B进行通信”实际上是指：“运行在主机A上的某个程序和运行在主机B上的另一个程序进行通信”。端到端的通信是进程之间的通信。

![image-20210620095643140](https://note-java.oss-cn-beijing.aliyuncs.com/img/image-20210620095643140.png)

“逻辑通信”的意思是“好像是这样通信，但事实上并非真的这样通信”。

**网络层和运输层的区别**：网络层是为主机之间提供逻辑通信；运输层为应用进程之间提供端到端的逻辑通信。

基于端口的复用和分用功能：

![image-20210620100102678](https://note-java.oss-cn-beijing.aliyuncs.com/img/image-20210620100102678.png)

**屏蔽作用**：运输层向高层用户==屏蔽==了下面网络核心的细节（如网络拓扑、路由选择协议），它使应用进程看见的就是好像在两个运输层实体==之间有一条端到端的逻辑通信信道==。

![image-20210620100211252](https://note-java.oss-cn-beijing.aliyuncs.com/img/image-20210620100211252.png)

**两种不同的运输协议**：但这条逻辑通信信道对上层的表现却因运输层使用的不同协议而有很大的差别。当运输层采用面向连接的 ==TCP== 协议时，尽管下面的网络是不可靠的（只提供尽最大努力服务），但这种逻辑通信信道就相当于一条全双工的可靠信道。当运输层采用无连接的 ==UDP== 协议时，这种逻辑通信信道是一条不可靠信道。 

## 运输层的两个主要协议

TCP/IP 的运输层有两个主要协议：

- 用户数据报协议 UDP (User Datagram Protocol)
- 传输控制协议 TCP (Transmission Control Protocol)

**UDP**：

- 无连接的协议，提供无连接服务
- 其传送的运输协议数据单元TPDU是 UDP 报文或用户数据报
- 支持单播、多播、广播
- 不提供可靠交付
- 简单。适用于很多应用，如：多媒体应用等

**TCP**：

- 面向连接的协议，提供面向连接服务
- 其传送的运输协议数据单元TPDU是 TCP 报文
- 支持点对点单播，不支持多播、广播
- 提供可靠服务
- 复杂。用于大多数应用，如：万维网、电子邮件、文件传送等

使用 UDP 和 TCP 的典型应用和应用层协议：

![image-20210620101234156](https://note-java.oss-cn-beijing.aliyuncs.com/img/image-20210620101234156.png)

需要解决的问题：

![image-20210620101417694](https://note-java.oss-cn-beijing.aliyuncs.com/img/image-20210620101417694.png)



## 运输层的端口

#  用户数据报协议 UDP

# 传输控制协议 TCP 概述

# 可靠传输的工作原理

# TCP 报文段的首部格式

# TCP 可靠传输的实现

# TCP 的流量控制

# TCP 的拥塞控制

# TCP 的运输连接管理